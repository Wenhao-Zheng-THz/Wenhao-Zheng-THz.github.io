<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>News | Terahertz Electrodynamics Lab @ CAS AIR</title>
  <meta name="description" content="News and updates from Terahertz Electrodynamics Lab @ CAS AIR." />
  <style>
    :root{
      --bg:#0a0f1c;
      --text:#e8eeff;
      --muted:#b6c2ea;
      --accent:#4da6ff;
      --radius:18px;
      --max:1080px;
      --shadow: 0 18px 40px rgba(0,0,0,.38);
    }
    *{ box-sizing:border-box; }
    html, body { height:100%; }
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,"Noto Sans",sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 420px at 15% 0%, rgba(124,58,237,.20), transparent 60%),
        radial-gradient(900px 460px at 85% 10%, rgba(77,166,255,.18), transparent 60%),
        linear-gradient(var(--bg), var(--bg));
      min-height:100vh;
      line-height:1.6;
    }
    a{ color:var(--accent); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    .container{ max-width:var(--max); margin:0 auto; padding:0 20px; }

    .nav{
      position:sticky; top:0; z-index:1000;
      background: rgba(10,15,28,.65);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav-inner{
      display:flex; justify-content:space-between; align-items:center;
      gap:14px; padding:12px 0;
    }
    .brand{ font-weight:800; }
    .menu{ display:flex; flex-wrap:wrap; gap:8px; justify-content:flex-end; }
    .menu a{
      padding:8px 10px; border-radius:12px;
      color:var(--text); font-weight:600; font-size:14px;
      border:1px solid transparent;
    }
    .menu a:hover{
      background: rgba(77,166,255,.08);
      border-color: rgba(77,166,255,.25);
      text-decoration:none;
    }
    .cta{
      padding:8px 12px !important;
      border:1px solid rgba(77,166,255,.35) !important;
      background: linear-gradient(135deg, rgba(77,166,255,.20), rgba(124,58,237,.15));
    }

    main{ padding:44px 0 10px; }

    .title-row{
      display:flex; justify-content:space-between; align-items:flex-end;
      gap:12px; margin-bottom:12px;
    }
    h1{ margin:0; font-size:28px; }
    .hint{ color:var(--muted); font-size:13px; }

    .news-list{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .news-item{
      background: rgba(17,24,39,.50);
      border:1px solid rgba(255,255,255,.07);
      border-radius:18px;
      padding:14px 16px;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
    }
    .news-top{
      display:flex; gap:12px; align-items:baseline;
      justify-content:space-between; flex-wrap:wrap;
    }
    .news-date{ color: rgba(182,194,234,.85); font-size:12px; white-space:nowrap; }
    .news-title{ margin:0; font-size:15px; font-weight:800; line-height:1.25; }
    .news-text{ margin:8px 0 0; color:var(--muted); font-size:13px; }
    .news-link{ margin-top:8px; font-size:13px; font-weight:700; }

    footer{
      margin-top:34px;
      padding:20px 0;
      text-align:center;
      color:var(--muted);
      border-top:1px solid rgba(255,255,255,.06);
      font-size:13px;
    }
  </style>
</head>
<body>

  <div class="nav">
    <div class="container">
      <div class="nav-inner">
        <div class="brand">Terahertz Electrodynamics Lab @ CAS AIR</div>
        <div class="menu">
          <a href="index.html">Home</a>
          <a href="research.html">Research</a>
          <a href="people.html">People</a>
          <a href="publications.html">Publications</a>
          <a href="news.html">News</a>
          <a href="join.html">Join</a>
          <a href="contact.html" class="cta">Contact</a>
        </div>
      </div>
    </div>
  </div>

  <main>
    <div class="container">
      <div class="title-row">
        <h1>News</h1>
        <div class="hint">All updates (auto-loaded from <code>news.json</code>)</div>
      </div>

      <div id="news-list" class="news-list"></div>
    </div>
  </main>

  <footer>
    © <span id="y"></span> Wenhao Zheng Lab · <a href="contact.html">Contact</a>
  </footer>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();

    function parseDateYMD(ymd){
      const m = /^(\d{4})-(\d{2})-(\d{2})$/.exec(ymd || "");
      if(!m) return new Date(0);
      return new Date(Number(m[1]), Number(m[2]) - 1, Number(m[3]));
    }

    async function renderAllNews(){
      const box = document.getElementById("news-list");
      try{
        const res = await fetch("news.json", { cache: "no-store" });
        if(!res.ok) throw new Error("news.json not found");
        let items = await res.json();

        items = (items || []).slice().sort((a,b) => parseDateYMD(b.date) - parseDateYMD(a.date));

        if(items.length === 0){
          box.innerHTML = '<div class="news-item"><div class="news-text">No updates yet.</div></div>';
          return;
        }

        box.innerHTML = items.map(it => {
          const date = it.date || "";
          const title = it.title || "";
          const text = it.text || "";
          const link = (it.link || "").trim();

          const titleHtml = link ? `<a href="${link}">${title}</a>` : `${title}`;
          const linkHtml = link ? `<div class="news-link"><a href="${link}">Read more →</a></div>` : "";

          return `
            <div class="news-item">
              <div class="news-top">
                <div class="news-title">${titleHtml}</div>
                <div class="news-date">${date}</div>
              </div>
              ${text ? `<div class="news-text">${text}</div>` : ""}
              ${linkHtml}
            </div>
          `;
        }).join("");

      }catch(e){
        box.innerHTML =
          `<div class="news-item">
             <div class="news-text"><b>News not loaded.</b> Please add <code>news.json</code> to the repo root.</div>
           </div>`;
      }
    }

    renderAllNews();
  </script>
</body>
</html>
